<template name="missions">
  <h3 class="nameSection">Misiones</h3>
  {{> scheduler}}
  <div class="container-fluid" id="missionsPage">
    <!-- <a href="#" onClick="renderWidget();">Render the Classroom share button</a>
    <div id="widget-div"></div> -->
    <!--<h4><g:sharetoclassroom size=32 url="https://google.com"></g:sharetoclassroom> <span style="vertical-align:10px;">Google Classroom</span></h4>
    {{> GCTasks}}-->
    <div class="row">
      {{> missionCardCreate}}
      {{#each challenge}}
        {{> missionCard2Template}}
      {{/each}}
    </div>
    <div class="list-group">
      <div class="panel panel-info">
        <div class="panel-heading" role="button" data-toggle="collapse" data-parent="" href="#missions" aria-expanded="true" aria-controls="missions" id="headMissions">
          <h4 class="panel-title text-center">
            Misiones
          </h4>
        </div>
        <div id="missions" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headMissions">
          <div class="panel-body">
            <div class="form-group has-info">
              <div class="panel-group" id="accordionMissions" role="tablist" aria-multiselectable="true">
                {{#each challenge}}
                  <div class="panel" style="background-color:{{missionColor}};" >
                    <div class="panel-heading" role="button" data-toggle="collapse" data-parent="#accordionMissions" href="#collapse{{_id}}" aria-expanded="false" aria-controls="collapse{{_id}}" id="heading{{_id}}" style="padding:0px;">
                      <div class="input-group" style="margin:0px;padding:0px;">
                        <h4 class="panel-title" style="padding:8px;">
                          Misión {{IoG}}: {{chalName}}
                        </h4>
                        <!--
                        <div class="main-wrapper">
                          <div class="hexbadge green-dark">
                            <div class="circle">
                              <i class='fa fa-wheelchair fa-2x'></i>
                              <img class="hexagon-avatar-img" src="/images/@mcg.png" />
                            </div>
                            <div class="ribbon">
                              {{chalName}}
                            </div>
                          </div>
                        </div>
                        -->
                        <span class="input-group-addon">
                          <span class="glyphicon glyphicon-circle-arrow-up btn-mup btn" aria-hidden="true"></span>
                          <span class="glyphicon glyphicon-circle-arrow-down btn-mdown btn" aria-hidden="true"></span>
                        </span>
                      </div>
                    </div>
                    <div id="collapse{{_id}}" class="panel-collapse collapse" role="tabpanel" aria-labelledby="heading{{_id}}">
                      <div class="panel-body" style="background-color:lightray;">
                        <div class="form-group">
                          <div class="input-group col-xs-12">
                            <label for="chalName">Nombre misión {{IoG}}</label>
                            <input type="text" class="form-control inputGroup" name="{{_id}}" id="chalName" {{teacher}} aria-describedby="inputGroupSuccess1Status" value="{{chalName}}">
                          </div>
                          <div class="input-group col-xs-12">
                            <label for="chalDesc">Descripción</label>
                            <textarea class="form-control" name="{{_id}}" id="chalDesc" {{teacher}} rows="3">{{chalDesc}}</textarea>
                          </div>
                          <div class="input-group mb-3">
                            <input type="checkbox" id="nbDepCheck" name={{_id}} {{disTeacher}} checked={{notebookDependence}}>
                            <label for="nbDepCheck"> Notas dependen del cuaderno de grupo</label>
                          </div>
                          {{#if isTeacher}}
                            <div class="input-group mb-3">
                              <button class="duplicarMision btn btn-info" name="{{_id}}">Duplicar</button>
                              <!--<button class="notas btn btn-info" name="{{_id}}">Introducir Notas</button>-->
                              <button class="btn btn-info" name="{{_id}}" id="chalDel">Eliminar</button>
                              <label for="nbDepCheck"> Color </label> <!--<input class="btn missionColor" type="color" value="{{missionColor}}">-->
                              <input type="color" value="{{missionColor}}" class="colorpicker missionColor">
                            </div>
                          {{/if}}
                          <div class="input-group col-xs-12">
                            <div class="panel panel-info" id="{{_id}}">
                              <div class="panel-heading">Tareas</div>
                              <div class="panel-body panelChal">
                                {{#each chalMissions _id}}
                                  <div class="input-group">
                                    <div class="input-group-addon">
                                      <span class="input-group-text">Tarea {{order}}</span>
                                    </div>
                                    <input id="cmd{{_id}}" type="text" class="form-control" {{teacher}} name="chalName" placeholder="Tarea" aria-label="Tarea" aria-describedby="basic-addon1" value="{{chalMissionDesc}}">
                                    <div class="input-group-addon">
                                      <span class="input-group-text">XP</span>
                                    </div>
                                    <input id="cmxp{{_id}}" type="text" class="form-control" {{teacher}} name="chalXP" placeholder="XP" aria-label="XP" aria-describedby="basic-addon1" value="{{chalMissionXP}}">
                                    {{#if isTeacher}}
                                    <div class="input-group-addon">
                                      <span class="glyphicon glyphicon-ok-circle chalMissionUpdate" aria-hidden="true"></span>
                                      <span class="glyphicon glyphicon-th-list chalMissionRub" aria-hidden="true"></span>
                                      <span class="glyphicon glyphicon-education chalMissionGrades" aria-hidden="true"></span>
                                      <span class="glyphicon glyphicon-circle-arrow-up chalMissionUp" aria-hidden="true"></span>
                                      <span class="glyphicon glyphicon-circle-arrow-down chalMissionDown" aria-hidden="true"></span>
                                      <span class="glyphicon glyphicon-remove-circle chalMissionDel" aria-hidden="true"></span>
                                    </div>
                                    {{/if}}
                                  </div>
                                  <div class="oculto" id="rubrica{{_id}}">
                                    <div class="input-group col-xs-12">
                                      <label>Descripción</label>
                                      <textarea class="form-control descTask" id="desc{{_id}}" {{teacher}} rows="3">{{descTask}}</textarea>
                                    </div>
                                    <div id="studentsPoints">
                                      <label>Rúbrica</label>
                                      <div class="btn-group btn-group-toggle btn-group-justified" data-toggle="buttons">
                                        <label class="btn btn-info btn-emoticon">
                                          <img class="emoticon" src="https://res.cloudinary.com/myclassgame/image/upload/v1549277040/images/star_red.png"/>
                                          <textarea class="form-control rubricaText r1" {{teacher}} rows="3">{{r1}}</textarea>
                                        </label>
                                        <label class="btn btn-info btn-emoticon">
                                          <img class="emoticon" src="https://res.cloudinary.com/myclassgame/image/upload/v1549277039/images/star_orange.png"/>
                                          <textarea class="form-control rubricaText r2" {{teacher}} rows="3">{{r2}}</textarea>
                                        </label>
                                        <label class="btn btn-info btn-emoticon">
                                          <img class="emoticon" src="https://res.cloudinary.com/myclassgame/image/upload/v1549277040/images/star_yellow.png"/>
                                          <textarea class="form-control rubricaText r3" {{teacher}} rows="3">{{r3}}</textarea>
                                        </label>
                                        <label class="btn btn-info btn-emoticon">
                                          <img class="emoticon" src="https://res.cloudinary.com/myclassgame/image/upload/v1549277040/images/star_white.png"/>
                                          <textarea class="form-control rubricaText r4" {{teacher}} rows="3">{{r4}}</textarea>
                                        </label>
                                        <label class="btn btn-info btn-emoticon">
                                          <img class="emoticon" src="https://res.cloudinary.com/myclassgame/image/upload/v1549277083/images/star_blue.png"/>
                                          <textarea class="form-control rubricaText r5" {{teacher}} rows="3">{{r5}}</textarea>
                                        </label>
                                        <label class="btn btn-info btn-emoticon">
                                          <img class="emoticon" src="https://res.cloudinary.com/myclassgame/image/upload/v1549277035/images/star_green.png"/>
                                          <textarea class="form-control rubricaText r6" {{teacher}} rows="3">{{r6}}</textarea>
                                        </label>
                                      </div>
                                      <div class="input-group col-xs-12">
                                        <button class="btn btn-info drive" {{teacher}}>Seleccionar fichero Drive</button>
                                        <a class="btn btn-info" href="https://drive.google.com/open?id={{drive}}" target="_blank" {{teacher}}>Ver fichero</a>
                                      </div>
                                    </div>
                                  </div>
                                {{/each}}
                                <div><button class="btn btn-info schedulerBtn">Calendario</button></div>
                                <div class='input-group date datetimepicker'>
                                    <input type='text' class="form-control" />
                                    <span class="input-group-addon">
                                        <span class="glyphicon glyphicon-calendar"></span>
                                    </span>
                                </div>
                                {{> taskCardCreateTemplate}}
                                {{#each chalMissions _id}}
                                  {{> taskCardTemplate}}
                                {{/each}}
                              </div>
                              {{#if isTeacher}}
                                <div class="panel-footer">
                                  <div class="input-group">
                                    <div class="input-group-addon">
                                      <span class="input-group-text">Nueva</span>
                                    </div>
                                    <input type="text" class="form-control" placeholder="Tarea" id="chalMissionDesc{{_id}}">
                                    <div class="input-group-addon">
                                      <span class="input-group-text"></span>
                                    </div>
                                    <input type="text" class="form-control" placeholder="XP" id="chalMissionXP{{_id}}">
                                    <div class="input-group-addon">
                                      <span class="glyphicon glyphicon-ok-circle chalSave" aria-hidden="true"></span>
                                    </div>
                                  </div>
                                </div>
                              {{/if}}
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                {{/each}}
              </div>
            </div>
            <!--
            {{#if isTeacher}}

              <form class="missionFormCreate">
                <div class="form-group">
                  <label class="control-label" for="inputGroupSuccess1">Crear misión</label>



                  <div class="input-group  mb-3">
                    <div class="input-group-addon">
                      <span class="input-group-text" id="basic-addon1">Nombre</span>
                    </div>
                    <input type="text" class="form-control" name="chalName" placeholder="Nombre de la misión" aria-label="Nombre del reto" aria-describedby="basic-addon1">
                  </div>

                  <div class="input-group mb-3">
                    <div class="input-group-addon">
                      <span class="input-group-text" id="basic-addon2">Descripción</span>
                    </div>
                    <input type="text" class="form-control" name="chalDesc" placeholder="Descripción de la misión" aria-label="Descripción del reto" aria-describedby="basic-addon2">
                  </div>

                  <div class="input-group mb-3">
                    <div class="input-group-addon">
                      <span class="input-group-text">Tipo</span>
                    </div>
                    <select class="custom-select form-control" id="selectIoG" name="IoG">
                      <option value="Grupal">Grupal</option>
                      <option value="Individual">Individual</option>
                    </select>
                  </div>

                  <div class="input-group mb-3">
                    <input type="checkbox" id="notebookCheck" name="notebookCheck" checked={{notebookDependence}}>
                    <label class="control-label" for="notebookCheck"> Notas dependen del cuaderno de grupo</label>
                  </div>

                  <div class="input-group mb-3">
                    <input type="submit" id="btn-save" value="Crear" class="btn btn-info">
                  </div>
                </div>
              </form>

            {{/if}}
            <svg class="" height="256pt" viewBox="0 0 512 512" width="256pt" xmlns="https://www.w3.org/2000/svg"><path d="m512 256c0 83.179688-39.671875 157.089844-101.128906 203.851562-43 32.71875-96.671875-16.523437-154.871094-16.523437s-111.871094 49.242187-154.871094 16.523437c-61.457031-46.761718-101.128906-120.671874-101.128906-203.851562 0-141.378906 114.621094-256 256-256s256 114.621094 256 256zm0 0" fill="#ff0335"/><path d="m410.871094 459.851562c61.457031-46.761718 101.128906-120.671874 101.128906-203.851562 0-3.371094-.085938-6.722656-.214844-10.0625l-173.167968-173.164062c-28.351563-31.292969-69.597657-32.605469-82.617188-32.605469-20.722656 0-112.980469 3.308593-110.878906 125.585937-4.863282 4.589844-7.621094 11.3125-6.847656 18.4375l1.929687 17.828125c.730469 6.761719 4.484375 12.496094 9.765625 16.015625 8.632812 58.613282 24.148438 97.074219 24.148438 97.074219l21.300781 21.160156h-34.578125c-32.859375 0-59.710938 26.871094-59.710938 59.699219v63.882812c43 32.71875 96.671875-4.839843 154.871094-4.839843s111.871094 37.558593 154.871094 4.839843zm0 0" fill="#c2001b"/><path d="m166.460938 178.234375h-.589844v-4.699219h.589844zm8.246093 8.242187h-.59375v-4.699218h.59375zm8.242188 8.246094h-.589844v-4.699218h.589844zm8.246093 8.246094h-.589843v-4.699219h.589843zm0 0" fill="#003d8d"/><path d="m256 40.167969c-21.59375 0-120.878906 3.566406-110.121094 141.609375 6.117188 78.507812 28.238282 133.332031 28.238282 133.332031h163.769531s22.117187-54.824219 28.234375-133.332031c10.757812-138.042969-88.527344-141.609375-110.121094-141.609375zm0 0" fill="#00acea"/><path d="m366.121094 181.78125c-6.121094 78.5-28.242188 133.328125-28.242188 133.328125h-81.878906v-274.9375c21.589844 0 120.878906 3.558594 110.121094 141.609375zm0 0" fill="#0082d1"/><path d="m217 283.351562h78.003906v59.648438h-78.003906zm0 0" fill="#fff"/><path d="m256 283.351562h39.003906v59.648438h-39.003906zm0 0" fill="#fff5cb"/><path d="m355.808594 160.09375c-4.167969-61.34375-56.484375-96.160156-99.808594-96.160156s-95.640625 34.816406-99.808594 96.160156c-11.210937 2.101562-19.167968 12.578125-17.917968 24.097656l1.929687 17.828125c1.3125 12.089844 12.277344 20.914063 24.367187 19.601563l2.085938-.222656c24.753906 64.4375 64.703125 81.027343 89.347656 84.792968 24.640625-3.765625 64.589844-20.355468 89.34375-84.792968l2.082032.222656c12.09375 1.3125 23.058593-7.511719 24.371093-19.601563l1.929688-17.828125c1.246093-11.519531-6.710938-21.996094-17.921875-24.097656zm0 0" fill="#ffdba9"/><path d="m373.726562 184.191406-1.929687 17.832032c-1.3125 12.089843-12.273437 20.90625-24.363281 19.597656l-2.082032-.222656c-24.757812 64.4375-64.707031 81.03125-89.351562 84.796874v-242.257812c43.328125 0 95.640625 34.816406 99.804688 96.15625 11.214843 2.105469 19.171874 12.578125 17.921874 24.097656zm0 0" fill="#ffc473"/><path d="m310.5625 178.234375h-54.5625v64.160156h19.382812v-46.175781h35.179688zm0 0" fill="#ffaa20"/><path d="m198.035156 178.234375h46.476563v17.980469h-46.476563zm0 0" fill="#ffc473"/><path d="m410.871094 395.96875v63.882812c-43 32.71875-96.671875 52.148438-154.871094 52.148438s-111.871094-19.429688-154.871094-52.148438v-63.882812c0-32.828125 26.851563-59.699219 59.710938-59.699219h190.582031c32.726563.140625 59.449219 26.960938 59.449219 59.699219zm0 0" fill="#7fc8f1"/><path d="m410.871094 395.96875v63.882812c-43 32.71875-96.671875 52.148438-154.871094 52.148438v-175.730469h95.421875c32.726563.140625 59.449219 26.960938 59.449219 59.699219zm0 0" fill="#00acea"/><path d="m256 59.058594s-99.808594-3.238282-99.808594 101.035156h199.617188c0-104.273438-99.808594-101.035156-99.808594-101.035156zm0 0" fill="#7fc8f1"/><path d="m355.808594 160.089844h-99.808594v-101.03125s99.808594-3.238282 99.808594 101.03125zm0 0" fill="#00acea"/><path d="m355.808594 124.015625-99.808594-20.152344-99.808594 20.152344v36.078125h199.617188zm0 0" fill="#ffdf47"/><path d="m355.808594 124.019531v36.070313h-99.808594v-56.230469l42.410156 8.570313zm0 0" fill="#fec000"/><path d="m345.347656 221.398438h-178.695312l-10.460938-61.304688 99.808594-14.125 99.808594 14.125zm0 0" fill="#005ed3"/><path d="m355.808594 160.089844-10.457032 61.308594h-89.351562v-75.429688l25.648438 3.632812zm0 0" fill="#003d8d"/><path d="m256 76.46875 13.796875 28.832031 31.679687 4.210938-23.15625 22.027343 5.785157 31.433594-28.105469-15.214844-28.105469 15.214844 5.785157-31.433594-23.160157-22.027343 31.683594-4.210938zm0 0" fill="#fff"/><path d="m240.214844 192.132812c-.03125-.089843-7.671875-13.023437-21.066406-16.21875-13.394532-3.199218-26.121094 4.953126-26.121094 4.953126l.078125.019531c.035156.089843 8.441406 13.207031 21.066406 16.21875 12.625 3.015625 26.121094-4.957031 26.121094-4.957031zm0 0" fill="#fff"/><path d="m271.785156 192.132812c.03125-.089843 7.671875-13.023437 21.066406-16.21875 13.394532-3.199218 26.121094 4.953126 26.121094 4.953126l-.078125.019531c-.035156.089843-8.441406 13.207031-21.066406 16.21875-12.625 3.015625-26.121094-4.957031-26.121094-4.957031zm0 0" fill="#fff5cb"/><path d="m168.601562 413.328125v83.363281c-10.332031-3.75-20.339843-8.152344-30-13.140625v-70.222656zm0 0" fill="#00acea"/><path d="m373.398438 413.328125v70.222656c-9.660157 4.988281-19.667969 9.390625-30 13.140625v-83.363281zm0 0" fill="#0082d1"/><path d="m298.410156 112.429688-20.089844 19.109374 3.328126 18.0625 1.929687 10.488282.53125 2.878906-5.320313-2.878906-22.789062-12.328125v-71.292969l13.800781 28.832031 31.679688 4.210938zm0 0" fill="#fff5cb"/></svg>
            -->
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<template name="deleteMission">
  <div class="modal" id="add_class_modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <form id="add_class_form">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="exampleModalLabel">Borrar misión</h4>
          </div>
          <div class="jumbotron jumbotron-fluid">
            <div class="container">
              <h1 class="display-4">Borrar misión</h1>
              <p class="lead">¿Estás seguro de borrar la misión?</p>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
            <input type="submit" class="btn btn-primary" value="Borrar">
          </div>
        </form>
      </div>
    </div>
  </div>
</template>
